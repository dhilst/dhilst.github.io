---
layout: post
title: stack implementation - Hello World
date: '2010-02-01T12:48:00.000-08:00'
author: Daniel Hilst
blogger: true
tags: 
modified_time: '2010-02-01T16:11:13.314-08:00'
blogger_id: tag:blogger.com,1999:blog-8785437776394405849.post-3266866742854692010
blogger_orig_url: http://gkos-hw.blogspot.com/2010/02/stack-implementation.html
---

This is not the right way to do the things.. <br />But.. it works.. doesn't?<br /><br />first a header/source file<br /><br /><pre class="brush: c">/* <br /> * file: table.h<br /> */<br />#ifndef TABLE_H<br />#define TABLE_H<br /><br />#ifdef DATATYPE<br />#ifdef BTMAXSIZE<br /><br />#include &lt;stdlib.h&gt;<br />#include &lt;err.h&gt;<br /><br />struct book_strc {<br />  DATATYPE data;<br />  struct book_strc * prev;<br />} book_stack;<br /><br /><br />/* Book table */<br />static struct book_strc * book_table[BTMAXSIZE];<br />/* Number of stacks in table */<br />static unsigned int tablen = 0;<br /><br /><br />void *<br />xmalloc (size_t siz)<br />{<br />  register void * pool = malloc (siz);<br />  if (!pool)<br /> err (1, "xmalloc");<br />  return pool;<br />}<br /><br /><br />void<br />bspush (unsigned int tentry, DATATYPE val)<br />{<br />  struct book_strc * new = (struct book_strc *) xmalloc (sizeof (struct book_strc));<br />  new-&gt;data = val;<br />  new-&gt;prev = book_table[tentry];  <br />  tablen++;<br />  book_table[tentry] = new;<br />}<br /><br />void<br />bspop (unsigned int tentry, DATATYPE * val)<br />{<br />  * val = book_table[tentry]-&gt;data;<br />  struct book_strc * tmp = book_table[tentry];<br />  book_table[tentry] = book_table[tentry]-&gt;prev;<br />  free (tmp);<br />  tablen--;<br />}<br /><br />#endif<br />#endif<br />#endif<br /></pre><br />and a main program using it .. <br /><pre class="brush: c">#include &lt;stdio.h&gt;<br />#include &lt;stdlib.h&gt;<br /><br />#define BTMAXSIZE 100<br />#define DATATYPE char*<br />#include "table.h"<br /><br />int<br />main (void)<br />{<br />  char str1[] = "Hello";<br />  char str2[] = "World";<br />  char * str3, * str4;<br /><br />  bspush (0, str1); <br />  bspush (1, str2);<br />  bspop (1, &amp;str4);<br />  bspop (0, &amp;str3);<br />  printf ("%s %s\n", str3, str4);<br />  return 0;<br />}<br /></pre>output:<br />Hello World<br /><br />Usage:<br />You declare 2 macros<br />BTMAXSIZE -&gt; this is the max size of the array of stacks<br />DATATYPE -&gt; this is the data type of stack objects <br />then you include the file table.h<br />this file implement a array of stacks that hold objects of same data type<br />The design idea is a book table where the stacks are<br />you can put a book at top of stack by passing the stack number and the object like<br />bspush (0, 100);<br />and then retrieve the same item by calling bspop with the number of same stack<br />and a address of same type object to put the result.. like:<br />bspop (0, &amp;i);